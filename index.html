<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>–ü—É—Å—Ç–æ—à—å: –ë–æ–π</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background: #1a1a1a;
            color: #fff;
            font-family: Arial;
            text-align: center;
            padding: 20px;
        }
        .monster {
            font-size: 100px;
            margin: 30px;
        }
        .hp-bar {
            width: 100%;
            height: 30px;
            background: #333;
            border-radius: 15px;
            margin: 20px 0;
        }
        .hp-fill {
            height: 100%;
            width: 80%;
            background: #ff4444;
            border-radius: 15px;
            line-height: 30px;
            color: white;
        }
        button {
            background: #ff6b00;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 20px;
            border-radius: 30px;
            margin: 10px;
            cursor: pointer;
        }
        button:active {
            background: #ff4500;
        }
        .log {
            background: #333;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>üêó –ú–£–¢–ò–†–û–í–ê–ù–ù–´–ô –ö–ê–ë–ê–ù</h1>
    <div class="hp-bar">
        <div class="hp-fill" id="monsterHpBar">80%</div>
    </div>
    <div class="monster">üêó</div>
    <button onclick="attack()">‚öîÔ∏è –ê–¢–ê–ö–û–í–ê–¢–¨</button>
    <div class="log" id="log">–ù–∞–∂–º–∏ –∞—Ç–∞–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –±–æ–π!</div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        let monsterHp = 80;
        let playerHp = 100;
        const maxMonsterHp = 80;

        function updateDisplay() {
            const percent = (monsterHp / maxMonsterHp) * 100;
            document.getElementById('monsterHpBar').style.width = percent + '%';
            document.getElementById('monsterHpBar').innerText = Math.floor(percent) + '%';
        }

        function attack() {
            if (monsterHp <= 0) {
                document.getElementById('log').innerHTML = 'üíÄ –ú–æ–Ω—Å—Ç—Ä —É–∂–µ –º–µ—Ä—Ç–≤! –ù–∞—á–Ω–∏ –Ω–æ–≤—ã–π –±–æ–π.';
                return;
            }

            // –£—Ä–æ–Ω –∏–≥—Ä–æ–∫–∞
            const damage = Math.floor(Math.random() * 20) + 10;
            monsterHp -= damage;
            
            // –£—Ä–æ–Ω –º–æ–Ω—Å—Ç—Ä–∞
            const monsterDamage = Math.floor(Math.random() * 15) + 5;
            playerHp -= monsterDamage;

            // –õ–æ–≥
            const log = document.getElementById('log');
            log.innerHTML = `‚öîÔ∏è –¢—ã –Ω–∞–Ω–µ—Å ${damage} —É—Ä–æ–Ω–∞!<br>`;
            log.innerHTML += `üêó –ö–∞–±–∞–Ω —É–¥–∞—Ä–∏–ª –Ω–∞ ${monsterDamage}!<br>`;
            
            if (monsterHp <= 0) {
                log.innerHTML += 'üéâ –ü–û–ë–ï–î–ê! –ú–æ–Ω—Å—Ç—Ä –ø–æ–≤–µ—Ä–∂–µ–Ω!';
                monsterHp = 0;
            } else if (playerHp <= 0) {
                log.innerHTML += 'üíÄ –¢—ã –ø–æ–≥–∏–±...';
            } else {
                log.innerHTML += `‚ù§Ô∏è –¢–≤–æ–µ HP: ${playerHp}`;
            }

            updateDisplay();

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ—Ç—É
            tg.sendData(JSON.stringify({
                monsterHp: monsterHp,
                playerHp: playerHp
            }));
        }

        updateDisplay();
    </script>
</body>
</html>
