<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—É—Å—Ç–æ—à—å: –ë–æ–π</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #1a1a1a;
            color: #fff;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            margin: 0;
        }
        .monster-card {
            background-color: #2a2a2a;
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #ff6b00;
        }
        .monster-name {
            font-size: 24px;
            color: #ff6b00;
            margin-bottom: 10px;
        }
        .hp-bar {
            width: 100%;
            height: 30px;
            background-color: #333;
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
        }
        .hp-fill {
            height: 100%;
            width: 80%;
            background-color: #ff4444;
            line-height: 30px;
            color: white;
        }
        .attack-btn {
            background-color: #ff6b00;
            color: white;
            border: none;
            border-radius: 30px;
            padding: 15px 40px;
            font-size: 20px;
            cursor: pointer;
            margin: 10px;
        }
        .attack-btn:active {
            background-color: #ff4500;
        }
        .log {
            background-color: #333;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: left;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="monster-card">
        <div class="monster-name">üêó –ú–£–¢–ò–†–û–í–ê–ù–ù–´–ô –ö–ê–ë–ê–ù</div>
        <div class="hp-bar">
            <div class="hp-fill" id="monsterHpBar" style="width: 80%;">80%</div>
        </div>
        <div id="monsterHp">80 / 100 HP</div>
        
        <div style="margin: 30px 0;">
            <div style="font-size: 100px;">üêó</div>
        </div>
        
        <button class="attack-btn" onclick="attackMonster()">‚öîÔ∏è –ê–¢–ê–ö–û–í–ê–¢–¨</button>
        
        <div class="log" id="battleLog">
            –ù–∞–∂–º–∏ –∞—Ç–∞–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –±–æ–π!
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        
        // –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.expand();
        
        // –ì–æ–≤–æ—Ä–∏–º Telegram, —á—Ç–æ –º—ã –≥–æ—Ç–æ–≤—ã
        tg.ready();
        
        // –î–∞–Ω–Ω—ã–µ –±–æ—è
        let monsterHp = 80;
        const maxMonsterHp = 100;
        let playerHp = 60;
        
        function updateDisplay() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–æ—Å–∫—É –∑–¥–æ—Ä–æ–≤—å—è
            const percent = (monsterHp / maxMonsterHp) * 100;
            document.getElementById('monsterHpBar').style.width = percent + '%';
            document.getElementById('monsterHpBar').textContent = Math.floor(percent) + '%';
            document.getElementById('monsterHp').textContent = monsterHp + ' / ' + maxMonsterHp + ' HP';
        }
        
        function attackMonster() {
            if (monsterHp <= 0) {
                document.getElementById('battleLog').innerHTML = '–ú–æ–Ω—Å—Ç—Ä —É–∂–µ –º–µ—Ä—Ç–≤! –ù–∞—á–Ω–∏ –Ω–æ–≤—ã–π –±–æ–π.';
                return;
            }
            
            // –ù–∞–Ω–æ—Å–∏–º —É—Ä–æ–Ω (10-20)
            const damage = Math.floor(Math.random() * 11) + 10;
            monsterHp -= damage;
            
            // –ú–æ–Ω—Å—Ç—Ä —Ç–æ–∂–µ –∞—Ç–∞–∫—É–µ—Ç
            const monsterDamage = Math.floor(Math.random() * 8) + 5;
            playerHp -= monsterDamage;
            
            // –õ–æ–≥ –±–æ—è
            const log = document.getElementById('battleLog');
            log.innerHTML = `‚öîÔ∏è –¢—ã –Ω–∞–Ω–µ—Å ${damage} —É—Ä–æ–Ω–∞!<br>`;
            log.innerHTML += `üêó –ö–∞–±–∞–Ω —É–¥–∞—Ä–∏–ª –≤ –æ—Ç–≤–µ—Ç –Ω–∞ ${monsterDamage} —É—Ä–æ–Ω–∞!<br>`;
            log.innerHTML += `–¢–≤–æ–µ HP: ${playerHp}<br>`;
            
            if (monsterHp <= 0) {
                log.innerHTML += 'üéâ –ü–û–ë–ï–î–ê! –ú–æ–Ω—Å—Ç—Ä –ø–æ–≤–µ—Ä–∂–µ–Ω!';
            } else if (playerHp <= 0) {
                log.innerHTML += 'üíÄ –¢—ã –ø–æ–≥–∏–±...';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —ç–∫—Ä–∞–Ω
            updateDisplay();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –±–æ—Ç—É
            tg.sendData(JSON.stringify({
                action: 'attack',
                damage: damage,
                monsterHp: monsterHp,
                playerHp: playerHp
            }));
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —ç–∫—Ä–∞–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateDisplay();
    </script>
</body>
</html>